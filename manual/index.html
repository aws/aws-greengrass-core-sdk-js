<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<title>
  File: README
  
    &mdash; AWS Greengrass Core SDK for JavaScript
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/highlight.github.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/highlight.pack.js"></script>

<script type="text/javascript" charset="utf-8">
  hljs.initHighlightingOnLoad();
</script>
  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame"></iframe>

      <div id="content">
        <!--REGION_DISCLAIMER_DO_NOT_REMOVE-->
        <div id='filecontents'><h1>AWS Greengrass Core SDK for JavaScript</h1>

<p>The <b>AWS Greengrass Core SDK for JavaScript</b> allows developers to write JavaScript Lambda functions which will run within Greengrass.</p>

<h2>Overview</h2>
<p>This document provides instructions for preparing your Greengrass Core environment to run Lambda functions written in JavaScript. It also includes examples on how to develop a Lambda function in JavaScript as well as packaging and running an example Hello World file in JavaScript for your Greengrass core.

<h2>Preparing your Greengrass to run NodeJS Lambda functions</h2>
The environment where Greengrass is running on needs to be able to run NodeJS 8.10 applications.
<ul>
<li>Install NodeJS 8.10 for your platform. You can download the newest NodeJS from <a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a>.
<li>When you untar the package downloaded from NodeJS website, you will find <code>node</code> file under <code>bin</code> directory.</li>
<li>Copy the file to <i><b>/usr/bin</b></i> or <i><b>/usr/local/bin</b></i> folder.</li>
<li>Rename the file to <i><b>nodejs8.10</b></i></li>
<li>Make sure the file is not a symlink.</li>
</ul>

<h2>Getting Started - Hello World</h2>
<ul>
<li>Copy <code>samples/HelloWorld</code> folder to your workspace.</li>
<li>Create a folder <code>node_modules</code> under <code>HelloWorld</code> folder.</li>
<li>Unzip aws-greengrass-core-sdk-js.zip into the folder. It should create a folder HelloWorld/node_modules/aws-greengrass-core-sdk</li>
<li>Zip up the content of HelloWorld folder so that the index.js is on the top of the zip file structure.</li>
<li>Go to AWS Lambda Console.</li>
<li>Create a new function.</li>
<li>Choose the Runtime as <code>Node.js 8.10</code></li>
<li>Upload the zip file in <i>Lambda function code</i> section.</li>
<li>Handler is <i>index.handler</i></li>
<li>Choose any role as the role is not used within Greengrass.</li>
<li>After creating the function, publish the Lambda.</li>
<li>Create an Alias and point to the Published version (not $LATEST).</li>
<li>Go to your Greengrass Group and add the Lambda under Lambdas section.</li>
<li>Click on the Lambda and change the <i>Lambda lifecycle</i> to <i>Make this function long-lived and keep it running indefinitely.</i></li>
<li>
Add a Subscription with the following configuration:
<ul>
<li>Source: Lambda which you just created and added to the group</li>
<li>Target: IoT Cloud</li>
<li>Topic: hello/world</li>
</ul>
</li>
<li>Deploy. A message from your Lambda should be published to the topic <i>hello/world</i> in the cloud every 5 seconds. You can check this by going to AWS IoT's <i>Test</i> page and subscribing to topic <i>hello/world</i>.</li>
</ul>

<h2>Including aws-greengrass-core-sdk with your function</h2>
Unzip the SDK into your node_modules folder of your function. This should create a aws-greengrass-core-sdk folder which includes the SDK.

<h2>Logging in NodeJS Lambdas</h2>
<p>Your <i>console.log</i> operation will be logged as INFO. A <i>console.error</i> operation will be logged as ERROR. Currently, our NodeJS SDK only allows you to log at INFO or ERROR level only.</p>

<h2>Supported Datatypes</h2>
<p>From GGC version 1.5, you can send both JSON and binary data as a payload when you invoking other Lambdas or publishing a message using IotData service. In order to make your lambda be able to handle binary payload, you need to configure the lambda in Greengrass console to mark it using binary input payload so that GGC can know how to deal with the data.</p>

<h2>Supported Context</h2>
<p>In Greengrass, you can send a context object in a JSON format to be passed to another Lambda that is being invoked. The context format looks like this:
<code>
{
    custom: {
        customData: 'customData',
    },
}
</code>
<p>


<h2>Compatibility</h2>
</div>
<div class="section" id="compatibility">
<h2>Compatibility<a class="headerlink" href="#compatibility" title="Permalink to this headline">¶</a></h2>
<p>As new features are added to AWS Greengrass, previous versions of the Greengrass SDK will be incompatible with newer versions of the AWS Greengrass
  core. The following table lists the compatible SDKs for all GGC releases.</p>

<style>
  table, th, td {
    border: 1px solid black;
    border-collapse: collapse;
  }

  th, td {
    padding: 5px;
  }
</style>
<table style="width:50%">
  <tr>
    <th>GGC Version</th>
    <th>Compatible SDK Versions</th>
  </tr>
  <tr>
    <td>1.0.x-1.6.x</td>
    <td>1.0.x-1.2.x</td>
  </tr>
  <tr>
    <td>1.7.x-1.8.x</td>
    <td>1.0.x-1.3.x</td>
  </tr>
  <tr>
    <td>1.9.x</td>
    <td>1.0.x-1.4.x</td>
  </tr>
</table>

</div>
        <div class="Section" id="1.4.0updates">
          <h2>1.4.0 Updates<a class="headerlink" href="#1.4.0updates" title="Permalink to this headline">¶</a></h2>
            <p>Added support for Node.js 8.10 Lambda runtime. Lambda functions that use Node.js 8.10 runtime can now run on an AWS IoT Greengrass core. (Existing Lambda functions that use Node.js 6.10 runtime can still run on Greengrass core, but they can’t be updated after 5/30/2019. Please refer to <a href="https://docs.aws.amazon.com/lambda/latest/dg/runtime-support-policy.html">AWS Lambda Runtimes Support Policy</a>.) </p>
        </div>

        <div class="Section" id="1.3.1updates">
          <h2>1.3.1 Updates<a class="headerlink" href="#1.3.1updates" title="Permalink to this headline">¶</a></h2>
          <p>Improved log level granularity.</p>
        </div>

        <div class="Section" id="1.3.0updates">
          <h2>1.3.0 Updates<a class="headerlink" href="#1.3.0updates" title="Permalink to this headline">¶</a></h2>
          <p>SDK supports SecretsManager client.</p>
        </div>

        <div class="Section" id="1.2.0updates">
          <h2>1.2.0 Updates<a class="headerlink" href="#1.2.0updates" title="Permalink to this headline">¶</a></h2>
          <p>SDK and GGC compatibility check takes place in the background.</p>
        </div>

        <div class="Section" id="1.1.0updates">
          <h2>1.1.0 Updates<a class="headerlink" href="#1.1.0updates" title="Permalink to this headline">¶</a></h2>
          <p>Lambda only accepted payload in JSON format. With this update, Invoking or publishing binary payload to a lambda is supported.</p>
        </div>

        <div class="Section" id="1.0.1updates">
          <h2>1.0.1 Updates<a class="headerlink" href="#1.0.1updates" title="Permalink to this headline">¶</a></h2>
          <p>SShadow operations were not receiving responses from the local shadow properly. This has been fixed.</p>
          <p>Lambda Invoke function's InvocationType's default value was Event. This has been changed to RequestResponse.</p>
        </div>

<h2>Getting Help</h2>

<ul>
<li><a href="https://forums.aws.amazon.com/forum.jspa?forumID=254">Ask on a Greengrass forum</a></li>
</ul>


<h2>License</h2>
Apache 2.0
<p></p>
</div>
      </div>

      <div id="footer">
  Generated on Mon Sep  11 00:00:00 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.3.1).
</div>

<!-- BEGIN-SECTION -->
<script type="text/javascript" src="https://media.amazonwebservices.com/amznUrchin.js"></script>
<!-- SiteCatalyst code version: H.25.2. Copyright 1996-2012 Adobe, Inc. All Rights Reserved.
More info available at http://www.omniture.com -->
<script language="JavaScript" type="text/javascript" src="https://media.amazonwebservices.com/js/sitecatalyst/s_code.min.js">
</script>
<script language="JavaScript" type="text/javascript">
  <!--
  s.prop66='AWS SDK for JavaScript';
  s.eVar66='D=c66';
  s.prop65='API Reference';
  s.eVar65='D=c65';
  var s_code=s.t();if(s_code)document.write(s_code)
  //-->
</script>
<script language="JavaScript" type="text/javascript">
  <!--if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
  //-->
</script>
<noscript>
  <img src="http://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="">
</noscript>
<!--/DO NOT REMOVE/-->
<!-- End SiteCatalyst code version: H.25.2. -->
<!-- END-SECTION -->

    </div>
  </body>
</html>
